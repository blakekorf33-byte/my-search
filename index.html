<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Intelligence Engine</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  height: 100vh;
  background: #111;
  color: #fff;
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
}

.box {
  width: 90%;
  max-width: 420px;
  text-align: center;
}

input {
  width: 100%;
  padding: 14px;
  font-size: 18px;
  border-radius: 8px;
  border: none;
  outline: none;
}

button {
  width: 100%;
  margin-top: 12px;
  padding: 12px;
  font-size: 18px;
  border-radius: 8px;
  border: none;
  background: #ff9800;
  color: #000;
  cursor: pointer;
}

#answer {
  margin-top: 15px;
  background: #1c1c1c;
  padding: 12px;
  border-radius: 8px;
  text-align: left;
  min-height: 40px;
}
</style>
</head>

<body>
<div class="box">
  <h1>My Intelligence Engine</h1>
  <input id="q" placeholder="Ask anything..." />
  <button onclick="think()">Ask</button>
  <div id="answer"></div>
</div>

<script>
/* ===== MEMORY ===== */
let memory = JSON.parse(localStorage.getItem("brain")) || [];

/* ===== CLASSIFY QUESTION ===== */
function classify(q) {
  q = q.toLowerCase();
  if (q.startsWith("what") || q.startsWith("who")) return "definition";
  if (q.startsWith("how")) return "how-to";
  if (q.startsWith("why")) return "reason";
  return "general";
}

/* ===== OSINT: WIKIPEDIA ===== */
async function fetchWiki(q) {
  try {
    const res = await fetch(
      "https://api.allorigins.win/raw?url=" +
      encodeURIComponent(
        "https://en.wikipedia.org/api/rest_v1/page/summary/" +
        q.replace(/\s+/g, "_")
      )
    );
    const data = await res.json();
    if (data.extract) return data.extract;
  } catch {}
  return null;
}

/* ===== OSINT: DUCKDUCKGO ===== */
async function fetchDDG(q) {
  try {
    const res = await fetch(
      "https://api.allorigins.win/raw?url=" +
      encodeURIComponent(
        "https://api.duckduckgo.com/?q=" + q + "&format=json&no_redirect=1"
      )
    );
    const data = await res.json();
    if (data.AbstractText) return data.AbstractText;
  } catch {}
  return null;
}

/* ===== MAIN THINK FUNCTION ===== */
async function think() {
  const q = document.getElementById("q").value.trim();
  const out = document.getElementById("answer");
  if (!q) return;

  out.innerHTML = "Thinkingâ€¦";

  /* MEMORY FIRST */
  const known = memory.find(
    m => m.question.toLowerCase() === q.toLowerCase()
  );
  if (known) {
    out.innerHTML =
      "<b>Type:</b> " + known.type + "<br><br>" +
      "<b>Answer (from memory):</b><br>" + known.answer;
    return;
  }

  const type = classify(q);

  /* OSINT SOURCES */
  let answer = await fetchWiki(q);
  if (!answer) answer = await fetchDDG(q);

  if (!answer) {
  if (q.toLowerCase().includes("make money")) {
    answer =
      "Common legal ways to make money include: " +
      "starting a small service business, freelancing online, " +
      "selling digital products, learning a trade, or investing long-term. " +
      "The best option depends on your skills, time, and risk tolerance.";
  } else {
    out.innerHTML =
      "No answer yet.<br><br>" +
      "<button onclick='search()'>Search the web</button>";
    return;
  }
}

  /* SAVE MEMORY */
  memory.push({
    question: q,
    type: type,
    answer: answer,
    time: new Date().toISOString()
  });
  localStorage.setItem("brain", JSON.stringify(memory));

  out.innerHTML =
    "<b>Type:</b> " + type + "<br><br>" +
    "<b>Answer:</b><br>" + answer;
}

/* ===== OPTIONAL SEARCH ===== */
function search() {
  const q = document.getElementById("q").value.trim();
  if (!q) return;
  window.location.href = "https://duckduckgo.com/?q=" + encodeURIComponent(q);
}

/* ===== ENTER KEY ===== */
document.getElementById("q").addEventListener("keypress", e => {
  if (e.key === "Enter") think();
});
</script>

</body>
</html>
